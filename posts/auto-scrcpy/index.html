<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Autostart scrcpy on device connection ::
        Anes Abismail — A mobile developer
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="OnCreateBlog: When it comes to programming and setting up my workflow, I always try to find a solution to automate basic tasks and focus on what matters, also it gives me a sense of magic. One of the things that were bugging me lately is manually launching scrcpy every time I plug my phone to test my apps, in this blog post I will show you how I automated that process, note that this setup is for macOS."
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://anesabml.github.io/posts/auto-scrcpy/" />





<link rel="stylesheet" href="https://anesabml.github.io/assets/style.css" />

<link rel="stylesheet" href="https://anesabml.github.io/style.css" />


<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="https://anesabml.github.io/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="https://anesabml.github.io/img/favicon.png" />


<link href="https://anesabml.github.io/assets/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://anesabml.github.io/assets/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://anesabml.github.io/assets/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://anesabml.github.io/assets/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://anesabml.github.io/assets/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://anesabml.github.io/assets/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://images.unsplash.com/photo-1541345023926-55d6e0853f4b"/>

<meta name="twitter:title" content="Autostart scrcpy on device connection"/>
<meta name="twitter:description" content="In this blog post I will show you how I automated the process of launching scrcpy every time I plug my phone."/>



<meta property="og:title" content="Autostart scrcpy on device connection" />
<meta property="og:description" content="In this blog post I will show you how I automated the process of launching scrcpy every time I plug my phone." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://anesabml.github.io/posts/auto-scrcpy/" />
<meta property="og:image" content="https://images.unsplash.com/photo-1541345023926-55d6e0853f4b" />
<meta property="article:published_time" content="2020-08-16T13:37:30+01:00" />
<meta property="article:modified_time" content="2020-08-16T13:37:30+01:00" /><meta property="og:site_name" content="Anes Abismail" />






  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >./gradlew</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/posts">Posts</a></li>
        
      
        
          <li><a href="/projects">Projects</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/posts">Posts</a></li>
      
    
      
        <li><a href="/projects">Projects</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">Autostart scrcpy on device connection</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-08-16
        </span>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 6 min read</span
        >
      
    </div>

    
      <span class="post-tags">
        
          <a href="https://anesabml.github.io/tags/android/">#android</a>&nbsp;
        
          <a href="https://anesabml.github.io/tags/automation/">#automation</a>&nbsp;
        
          <a href="https://anesabml.github.io/tags/tools/">#tools</a>&nbsp;
        
      </span>
    

    
      <figure class="post-cover">
        
          <img src="https://images.unsplash.com/photo-1541345023926-55d6e0853f4b" alt="Autostart scrcpy on device connection" />
        

        
          <figcaption class="center">Photo by <a href="https://unsplash.com/@jupp?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Jonathan Kemper</a> on <a href="https://unsplash.com/s/photos/android?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></figcaption>
        
      </figure>
    

    <div class="post-content">
      
      <h1 id="oncreateblog">OnCreateBlog:</h1>
<p>When it comes to programming and setting up my workflow, I always try to find a solution to automate basic tasks and focus on what matters, also it gives me a sense of magic. One of the things that were bugging me lately is manually launching <a href="https://github.com/Genymobile/scrcpy">scrcpy</a> every time I plug my phone to test my apps, in this blog post I will show you how I automated that process, note that this setup is for macOS.</p>
<p>There&rsquo;s a command-line tool allows to execute a command whenever a new device is connected to adb, but that didn&rsquo;t work for me, you can check out <a href="https://github.com/rom1v/autoadb">here</a>.</p>
<h1 id="my-thought-process">My thought process:</h1>
<p>As for each problem a plan is required, my initial thought was to set up some kind of Cron job that runs every second and check for new USB devices, but this is brute force and it&rsquo;s not efficient to run a job every second, even if we set the job to run every minute that would not be a good idea either if I plug my phone I might have to wait one minute for the job to launch <a href="https://github.com/Genymobile/scrcpy">scrcpy</a>.</p>
<p>Okay what other options we have, let&rsquo;s run a job and write an infinite loop that checks for new USB devices. this solves the instant problem but it&rsquo;s not efficient.</p>
<p>I had one last thought and it&rsquo;s to set up some sort of a listener, callback on an event that gets triggered every time a USB device is plugged in. After doing some research I found out that it is possible thanks to <code>launchd</code></p>
<h1 id="what-is-launchd">What is launchd:</h1>
<p><code>launchd</code> is a service management tool used by macOS it was created by Apple, it&rsquo;s similar in some ways to <code>systemd</code> on Linux.</p>
<p>Another definition according to Apple:</p>
<blockquote>
<p>The launchd process is used by macOS to manage daemons and agents, and you can use it to run your shell scripts.</p>
</blockquote>
<p>But wait what are daemons and agents?</p>
<p>A Daemon is a computer program that runs on background without any direct control and interaction with the user, they are usually launched when the system boots. An example of a daemon is a backup schedule when you enable Time Machine.</p>
<p>An Agent is very familiar to a Daemon but it runs within the user session, which means that they are launched when the user logs in.</p>
<p>Based on the <a href="https://support.apple.com/en-gb/guide/terminal/apdc6c1077b-5d5d-4d35-9c19-60f2397b2369/mac">Apple documentation</a> we can find the various daemons and agents managed by <code>launchd</code> by looking inside the following folders:</p>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">Are</th>
</tr>
</thead>
<tbody>
<tr>
<td>/System/Library/LaunchDaemons</td>
<td style="text-align:center">Apple-supplied system daemons</td>
</tr>
<tr>
<td>/System/Library/LaunchAgents</td>
<td style="text-align:center">Apple-supplied agents that apply to all users on a per-user basis</td>
</tr>
<tr>
<td>/Library/LaunchDaemons</td>
<td style="text-align:center">Third-party system daemons</td>
</tr>
<tr>
<td>/Library/LaunchAgents</td>
<td style="text-align:center">Third-party agents that apply to all users on a per-user basis</td>
</tr>
<tr>
<td>~/Library/LaunchAgents</td>
<td style="text-align:center">Third-party agents that apply only to the logged-in user</td>
</tr>
</tbody>
</table>
<h1 id="creating-a-launchdaemon-or-launchagent">Creating a LaunchDaemon or LaunchAgent:</h1>
<p>Based on those definitions, we will proceed with creating an Agent because it&rsquo;s more suitable to solve our problem, we don&rsquo;t want to launch <a href="https://github.com/Genymobile/scrcpy">scrcpy</a> if the user is not logged in.</p>
<p>To create a new <code>LaunchAgent</code> we need to add our config file to the respective directory, I will be adding my config file to <code>~/Library/LaunchAgents</code>.</p>
<p>Those files require a specific format: <code>plist</code> (property list) it holds the specific information of the task. Below are the required keys to include in the file:</p>
<ul>
<li>Label: Unique task identifier.</li>
<li>Program or ProgramArguments: String Path to executable.</li>
<li>RunAtLoad: (True or False) Run job immediately when <code>plist</code> file is loaded.</li>
<li>LaunchOnlyOnce: Run job once, and never try again.</li>
<li>LaunchEvents: there is more than one trigger or launch event but the one that we are going to use is: <code>I/O kit notifications - USB device.</code></li>
</ul>
<p>Note that the difference between Program and ProgramArguments is that when using ProgramArguments you can specify the path to executable and an array of arguments arg[0],arg[1],&hellip;.</p>
<p>So hers is my config file, which I name <code>com.oneplus5t.scrcpy.plist</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN &lt;http://www.apple.com/DTDs/PropertyList-1.0.dtd&gt;</span> &gt;
<span style="color:#f92672">&lt;plist</span> <span style="color:#a6e22e">version=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;dict&gt;</span>
    <span style="color:#f92672">&lt;key&gt;</span>Label<span style="color:#f92672">&lt;/key&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>com.oneplus5t.scrcpy<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;key&gt;</span>ProgramArguments<span style="color:#f92672">&lt;/key&gt;</span>
    <span style="color:#f92672">&lt;array&gt;</span>
        <span style="color:#f92672">&lt;string&gt;</span>/usr/local/bin/launch_iterm.bash<span style="color:#f92672">&lt;/string&gt;</span>
        <span style="color:#f92672">&lt;string&gt;</span>scrcpy<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;/array&gt;</span>
    <span style="color:#f92672">&lt;key&gt;</span>LaunchEvents<span style="color:#f92672">&lt;/key&gt;</span>
    <span style="color:#f92672">&lt;dict&gt;</span>
            <span style="color:#f92672">&lt;key&gt;</span>com.apple.iokit.matching<span style="color:#f92672">&lt;/key&gt;</span>
            <span style="color:#f92672">&lt;dict&gt;</span>
                    <span style="color:#f92672">&lt;key&gt;</span>com.apple.device-attach<span style="color:#f92672">&lt;/key&gt;</span>
                    <span style="color:#f92672">&lt;dict&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>idProduct<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;integer&gt;</span>1234<span style="color:#f92672">&lt;/integer&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>idVendor<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;integer&gt;</span>1444<span style="color:#f92672">&lt;/integer&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>IOProviderClass<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;string&gt;</span>IOUSBDevice<span style="color:#f92672">&lt;/string&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>IOMatchLaunchStream<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;true/&gt;</span>
                    <span style="color:#f92672">&lt;/dict&gt;</span>
            <span style="color:#f92672">&lt;/dict&gt;</span>
    <span style="color:#f92672">&lt;/dict&gt;</span>
<span style="color:#f92672">&lt;/dict&gt;</span>
<span style="color:#f92672">&lt;/plist&gt;</span>
</code></pre></div><p>To find your phone&rsquo;s idProduct and idVendor run this command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ioreg -p IOUSB -l
</code></pre></div><p>Explaining what the above command does:</p>
<ol>
<li><code>ioreg</code> displays the I/O Kit registry.</li>
<li><code>-p</code> option is to traverse <code>IOUSB</code> registry</li>
<li><code>-l</code> to show more information about the displayed objects.</li>
</ol>
<p>You may notice that we are running a script <code>launch_iterm.bash</code>, thanks to this script we can launch <a href="https://www.iterm2.com/">iTerm2</a> or any other terminal application, it uses <code>AppleScript</code> which is a scripting language created by (wait for it) → Apple. check out <a href="https://gist.github.com/geyang/a495a5ea8e6fdd2f79f8e874616ea182">this</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span>
<span style="color:#75715e"># Open new iTerm window from the command line using v3 syntax for `AppleScript` as needed in iTerm2 Version 3+</span>
<span style="color:#75715e"># This script blocks until the cmd is executed in the new iTerm2 window.  It then leaves the window open.</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># See also &lt;https://www.iterm2.com/documentation-scripting.html&gt;</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># Usage:</span>
<span style="color:#75715e">#     iterm                   Opens the current directory in a new iTerm window</span>
<span style="color:#75715e">#     iterm [PATH]            Open PATH in a new iTerm window</span>
<span style="color:#75715e">#     iterm [CMD]             Open a new iTerm window and execute CMD</span>
<span style="color:#75715e">#     iterm [PATH] [CMD] ...  You can probably guess</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># Example:</span>
<span style="color:#75715e">#     iterm ~/Code/HelloWorld ./setup.sh</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># References:</span>
<span style="color:#75715e">#     iTerm AppleScript Examples:</span>
<span style="color:#75715e">#     &lt;https://gitlab.com/gnachman/iterm2/wikis/Applescript&gt;</span>
<span style="color:#75715e">#</span>
<span style="color:#75715e"># Credit:</span>
<span style="color:#75715e">#     Forked from &lt;https://gist.github.com/vyder/96891b93f515cb4ac559e9132e1c9086&gt;</span>
<span style="color:#75715e">#     Inspired by tab.bash by @bobthecow</span>
<span style="color:#75715e">#     link: &lt;https://gist.github.com/bobthecow/757788&gt;</span>

<span style="color:#75715e"># OSX only</span>
<span style="color:#f92672">[</span> <span style="color:#e6db74">`</span>uname -s<span style="color:#e6db74">`</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Darwin&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> echo <span style="color:#e6db74">&#39;OS X Only&#39;</span> <span style="color:#f92672">&amp;&amp;</span><span style="color:#66d9ef">return</span>

<span style="color:#66d9ef">function</span> iterm <span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    local cmd<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
    local wd<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$PWD<span style="color:#e6db74">&#34;</span>
    local args<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -d <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        wd<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>cd <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>; pwd<span style="color:#66d9ef">)</span>
        args<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>@:2<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
    <span style="color:#66d9ef">fi</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -n <span style="color:#e6db74">&#34;</span>$args<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        <span style="color:#75715e"># echo $args</span>
        cmd<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$args<span style="color:#e6db74">&#34;</span>
    <span style="color:#66d9ef">fi</span>

osascript <span style="color:#e6db74">&lt;&lt;EOF
</span><span style="color:#e6db74">	tell application &#34;iTerm&#34;
</span><span style="color:#e6db74">		activate
</span><span style="color:#e6db74">		set new_window to (create window with default profile)
</span><span style="color:#e6db74">		set cSession to current session of new_window
</span><span style="color:#e6db74">		tell new_window
</span><span style="color:#e6db74">			tell cSession
</span><span style="color:#e6db74">				delay 1
</span><span style="color:#e6db74">				write text &#34;$cmd&#34;
</span><span style="color:#e6db74">			end tell
</span><span style="color:#e6db74">		end tell
</span><span style="color:#e6db74">	end tell
</span><span style="color:#e6db74">EOF</span>
<span style="color:#f92672">}</span>
iterm $@
</code></pre></div><p>One thing left to do is to load the Agent and plug your phone, to load the Agent we use the <code>launch</code> tool:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">launchctl load com.oneplus5t.scrcpy.plist
</code></pre></div><p>After loading the configuration file, you will notice that it&rsquo;s repeatedly executed each 10s, as I understand this is caused because the <a href="https://github.com/Genymobile/scrcpy"><code>scrcpy</code></a> doesn&rsquo;t return a result and this causes the executable being called repeatedly (if I am mistaken please correct me). Thanks to this <a href="https://github.com/himbeles/mac-device-connect-daemon">repo</a>, our problem can be fixed:</p>
<ol>
<li>
<p>Unload the configuration file</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">launchctl unload com.oneplus5t.scrcpy.plist
</code></pre></div></li>
<li>
<p>Clone the repo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone &lt;https://github.com/himbeles/mac-device-connect-daemon&gt;
</code></pre></div></li>
<li>
<p>Build the event stream handler:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gcc -framework Foundation -o xpc_set_event_stream_handler xpc_set_event_stream_handler.m
</code></pre></div></li>
<li>
<p>Copy the result to <code>/usr/local/bin/</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp xpc_set_event_stream_handler /usr/local/bin/
</code></pre></div></li>
<li>
<p>Update the <code>LaunchAgent</code> configuration file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN &lt;http://www.apple.com/DTDs/PropertyList-1.0.dtd&gt;</span> &gt;
<span style="color:#f92672">&lt;plist</span> <span style="color:#a6e22e">version=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;dict&gt;</span>
    <span style="color:#f92672">&lt;key&gt;</span>Label<span style="color:#f92672">&lt;/key&gt;</span>
    <span style="color:#f92672">&lt;string&gt;</span>com.oneplus5t.scrcpy<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;key&gt;</span>ProgramArguments<span style="color:#f92672">&lt;/key&gt;</span>
    <span style="color:#f92672">&lt;array&gt;</span>
        <span style="color:#f92672">&lt;string&gt;</span>/usr/local/bin/xpc_set_event_stream_handler<span style="color:#f92672">&lt;/string&gt;</span> <span style="color:#75715e">&lt;!-- Add this line --&gt;</span>
        <span style="color:#f92672">&lt;string&gt;</span>/usr/local/bin/launch_iterm.bash<span style="color:#f92672">&lt;/string&gt;</span>
        <span style="color:#f92672">&lt;string&gt;</span>scrcpy<span style="color:#f92672">&lt;/string&gt;</span>
    <span style="color:#f92672">&lt;/array&gt;</span>
    <span style="color:#f92672">&lt;key&gt;</span>LaunchEvents<span style="color:#f92672">&lt;/key&gt;</span>
    <span style="color:#f92672">&lt;dict&gt;</span>
            <span style="color:#f92672">&lt;key&gt;</span>com.apple.iokit.matching<span style="color:#f92672">&lt;/key&gt;</span>
            <span style="color:#f92672">&lt;dict&gt;</span>
                    <span style="color:#f92672">&lt;key&gt;</span>com.apple.device-attach<span style="color:#f92672">&lt;/key&gt;</span>
                    <span style="color:#f92672">&lt;dict&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>idProduct<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;integer&gt;</span>1234<span style="color:#f92672">&lt;/integer&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>idVendor<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;integer&gt;</span>1444<span style="color:#f92672">&lt;/integer&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>IOProviderClass<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;string&gt;</span>IOUSBDevice<span style="color:#f92672">&lt;/string&gt;</span>
                            <span style="color:#f92672">&lt;key&gt;</span>IOMatchLaunchStream<span style="color:#f92672">&lt;/key&gt;</span>
                            <span style="color:#f92672">&lt;true/&gt;</span>
                    <span style="color:#f92672">&lt;/dict&gt;</span>
            <span style="color:#f92672">&lt;/dict&gt;</span>
    <span style="color:#f92672">&lt;/dict&gt;</span>
<span style="color:#f92672">&lt;/dict&gt;</span>
<span style="color:#f92672">&lt;/plist&gt;</span>
</code></pre></div></li>
</ol>
<h1 id="ondestroyblog">OnDestroyBlog:</h1>
<p>This was a fun experiment, it opens a wide variety of automation ideas and improving my workflow, Thank you for reading I hope you learned something new and you had fun as I did, Feel free to reach out on <a href="https://twitter.com/anesabml">Twitter</a> if you have any questions.</p>
<h1 id="resources">Resources:</h1>
<p><a href="http://technologeeks.com/docs/launchd.pdf">Launchd - At Your Service!</a></p>
<p><a href="https://www.techrepublic.com/article/macos-know-the-difference-between-launch-agents-and-daemons-and-use-them-to-automate-processes/">macOS: Know the difference between launch agents and daemons, and use them to automate processes</a></p>
<p><a href="https://developer.apple.com/library/archive/technotes/tn2083/_index.html">Daemons and Agents</a></p>
<p><a href="https://support.apple.com/en-gb/guide/terminal/apdc6c1077b-5d5d-4d35-9c19-60f2397b2369/mac">Script management with launchd in Terminal on Mac</a></p>
<p><a href="https://github.com/himbeles/mac-device-connect-daemon">Mac device connect daemon</a></p>
<p><a href="https://gist.github.com/geyang/a495a5ea8e6fdd2f79f8e874616ea182">Bash function for opening up iterm form current directory</a></p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
            
              <span class="button next">
                <a href="https://anesabml.github.io/posts/30-days-leetcode/">
                  <span class="button__text">What I learned from 30 days of doing LeetCode problems</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">© Copyright 2020 Anes Abismail.</div>
      
  </div>
</footer>

<script src="https://anesabml.github.io/assets/main.js"></script>
<script src="https://anesabml.github.io/assets/prism.js"></script>


      
    </div>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-175312861-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </body>
</html>
